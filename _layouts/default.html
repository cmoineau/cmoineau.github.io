<!DOCTYPE html>
	<script>
		function httpGet(theUrl){
			var xmlHttp = new XMLHttpRequest();
			xmlHttp.open("GET", theUrl, false); // false for synchronous request
			xmlHttp.send(null);
			return xmlHttp.response;
		}
		function getLastCommit(){
			months = [null, "January","February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "Décember"]

			commits = httpGet("https://api.github.com/repos/cmoineau/cmoineau.github.io/commits");
			date = JSON.parse(commits)[0].commit.author.date;
			year = date[0] + date[1] + date[2] + date[3]
			month = date[5] + date[6]
			day = date[8] + date[9]
			str_date = "Last edition : " + day + " " + months[parseInt(month)] + " " + year
			return str_date
		}
		function setLastCommit(){
			var p = document.getElementById("lastchange");
			p.innerHTML = getLastCommit()
		}
		
	</script>
	<html lang="en" data-theme='dark'> <!--Change to light later ?-->
		<head>
			<title>{{ page.title }}</title>
			<!-- link to the French version -->
			<link rel="alternate" hreflang="fr"
        	href="/fr"/>

			<!-- link to main stylesheet -->
			<link rel="stylesheet" type="text/css" href="/css/main.css">
			<!-- link for icon -->
			 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

		</head>
		<body onload="setLastCommit()">
			<nav>
	    		<ul>
	        		<li><a href="/">Home</a></li>
	        		<li><a href="/internship">Work experiences</a></li>
	        		<li><a href="/project">Completed projects</a></li>
	        		
	        		<a href="/fr" id="flag_link"> <img id="flag" src="/ressources/fr_flag.png" title="Vers le mode Français"> </a>
	    		</ul>
	    		
			</nav>
			<!--
			<div class="toggle-container" style="margin-right: 1.5em; margin-top: 1em">
					<input type="checkbox" id="switch" position='fixed' name="theme"/><label for="switch">Toggle</label>
    		</div>
    		-->
			<div class="container" style="padding-bottom: 1.5em;">
			
				{{ content }}
			
			</div><!-- /.container -->
			
			<footer>
	    		<ul>
	        		<li> 
	        			<i class="fa fa-envelope-o fa-lg" aria-hidden="true"></i>
 						<a href="mailto:moineaucyril@gmail.com">
 							email</a>
 					</li>
	        		<li>
	        			<i class="fa fa-github fa-lg" aria-hidden="true"></i>
	        			<a href="https://github.com/cmoineau"> github.com/cmoineau</a>
	        		</li>
	        		<p id="lastchange"; style="float : right; font-size: 0.8em; padding-right: 1em;";></p>
				</ul>

			</footer>

		</body>


		<script type="text/javascript">
			let trans = () => {
	            document.documentElement.classList.add('transition');
	            window.setTimeout(() => {
	                document.documentElement.classList.remove('transition')
	            }, 1000)
	        }


			var checkbox = document.getElementById('switch');
    		checkbox.addEventListener('change', function() {
	            if(this.checked) {
	                trans()
	                document.documentElement.setAttribute('data-theme', 'dark')
	                localStorage.setItem("data-theme", 1);
	            } else {
	                trans()
	                document.documentElement.setAttribute('data-theme', 'light')
	                localStorage.setItem("data-theme", 0);
	            }
    		})

    		if(!("data-theme" in localStorage)){
				localStorage.setItem("data-theme", 0);
			}else{
				if (localStorage.getItem('data-theme') != 0){
					document.documentElement.setAttribute('data-theme', 'dark')
					checkbox.checked = true
				}
			}
		</script>


	</html>