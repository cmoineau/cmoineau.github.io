<li class="theme-switch-wrapper">
    <input type="checkbox" class="checkbox" id="switch" />
    <label class="label" for="switch">
        <i class="fa fa-sun-o" id="sun"></i>
        <i class="fa fa-moon-o" id="moon"></i>
        <div class="ball"></div>
    </label>
</li>

<script>
    let trans = () => {
        document.documentElement.classList.add('transition');
        window.setTimeout(() => {
            document.documentElement.classList.remove('transition')
        }, 1000)
    }

    const checkbox = document.getElementById('switch');
    const htmlElement = document.documentElement;

    // Function to set theme
    const setTheme = (theme) => {
        htmlElement.classList.add('transition');
        htmlElement.setAttribute('data-theme', theme);
        localStorage.setItem("data-theme", theme === 'dark' ? 1 : 0);

        // Cleanup transition class
        window.setTimeout(() => {
            htmlElement.classList.remove('transition');
        }, 1000);
    };

    // Toggle Listener
    checkbox.addEventListener('change', function () {
        setTheme(this.checked ? 'dark' : 'light');
    });

    // Initialization logic
    const currentTheme = localStorage.getItem('data-theme');

    if (currentTheme === null) {
        // Default to dark if no preference
        setTheme('dark');
        checkbox.checked = true;
    } else {
        if (currentTheme == "1") {
            htmlElement.setAttribute('data-theme', 'dark');
            checkbox.checked = true;
        } else {
            htmlElement.setAttribute('data-theme', 'light');
            checkbox.checked = false;
        }
    }
</script>